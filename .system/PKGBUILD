tar -h --exclude=.idea -cf rootfs.tar -C rootfs .

pkgname=linux-config
pkgver=0.1.0
pkgrel=17
pkgdesc='linux config'
url="https://github.com/uarslandev/.dotfiles-arch"
license=('GPL3')
arch=('x86_64')
source=('rootfs.tar')
noextract=('rootfs.tar')
sha512sums=('SKIP')

#startPackages
depends=(
    7zip
    adobe-source-han-sans-jp-fonts
    angular-cli
    ani-cli
    anki-bin
    baobab
    base
    base-devel
    bash-language-server
    blender
    bluez
    bluez-utils
    bottles
    btop
    carla
    ceserver
    cheat-engine-zh
    csharp-ls
    cups
    cups-pdf
    curl
    decibels
    direnv
    docker
    docker-compose
    dockerfile-language-server
    dotnet-sdk
    efibootmgr
    element-desktop
    epiphany
    fd
    firefox
    fzf
    fzf-tab-git
    gdb
    gdm
    ghidra
    git
    git-delta
    git-filter-repo
    github-cli
    git-secret
    gnome-backgrounds
    gnome-calculator
    gnome-calendar
    gnome-characters
    gnome-clocks
    gnome-color-manager
    gnome-connections
    gnome-console
    gnome-contacts
    gnome-control-center
    gnome-disk-utility
    gnome-font-viewer
    gnome-keyring
    gnome-logs
    gnome-maps
    gnome-menus
    gnome-music
    gnome-remote-desktop
    gnome-session
    gnome-settings-daemon
    gnome-shell
    gnome-shell-extension-arc-menu
    gnome-shell-extension-blur-my-shell
    gnome-shell-extension-caffeine
    gnome-shell-extension-clipboard-indicator
    gnome-shell-extension-dash-to-dock
    gnome-shell-extension-dash-to-dock-git
    gnome-shell-extension-gsconnect
    gnome-shell-extension-system-monitor-next-git
    gnome-software
    gnome-system-monitor
    gnome-terminal
    gnome-text-editor
    gnome-tour
    gnome-tweaks
    gnome-user-docs
    gnome-user-share
    gnome-weather
    graphql-lsp
    grilo-plugins
    gst-plugin-pipewire
    guitarix
    gvfs
    gvfs-afc
    gvfs-dnssd
    gvfs-goa
    gvfs-google
    gvfs-gphoto2
    gvfs-mtp
    gvfs-nfs
    gvfs-onedrive
    gvfs-smb
    gvfs-wsdd
    gxplugins-lv2-git
    htop
    ida-free
    imhex-bin
    intel-compute-runtime
    intel-media-driver
    intel-ucode
    iwd
    jdownloader2
    jetbrains-toolbox
    k9s
    kanagawa-gtk-theme-git
    kanagawa-icon-theme-git
    kdeconnect
    keepassxc
    libpulse
    libva-intel-driver
    linux
    linux-firmware
    linux-lts-headers
    loupe
    lua-language-server
    malcontent
    man-db
    mangohud
    man-pages
    maven
    mesa-utils
    mongodb-bin
    mongosh-bin
    nano
    nautilus
    neovim
    net-tools
    networkmanager
    network-manager-applet
    networkmanager-openvpn
    nmap
    nodejs-lts-jod
    notion-app-electron
    notion-calendar-electron
    npm
    ntfs-3g
    nvim-lazy
    obsidian
    obs-studio
    oh-my-zsh-git
    openssh
    orca
    otf-aurulent-nerd
    papers
    paru
    paru-debug
    pavucontrol
    pcsx2-latest-bin
    pipewire
    pipewire-alsa
    pipewire-docs
    pipewire-jack
    pipewire-pulse
    proton-ge-custom-bin
    pyright
    python
    python-i3ipc
    python-virtualenv
    qbittorrent
    qjackctl
    ranger
    rar
    rclone
    reclass.net-bin
    reflector
    ripgrep
    rygel
    samba
    showtime
    simple-scan
    smartmontools
    snapshot
    sof-firmware
    sql-language-server
    steam
    sushi
    systemd
    teamspeak
    tecla
    thunderbird
    tmux
    torbrowser-launcher
    tree
    ttf-nerd-fonts-symbols
    typescript-language-server
    ufw
    unityhub
    unzip
    ventoy-bin
    vesktop-bin
    vi
    vim
    vimix-kanagawa-cursors
    visual-studio-code-bin
    vscode-html-languageserver
    vscode-json-languageserver
    vue-language-server
    vulkan-intel
    vulkan-radeon
    vulkan-tools
    wget
    which
    winetricks
    wireless_tools
    wireplumber
    wl-clipboard
    xdg-desktop-portal-gnome
    xdg-desktop-portal-gtk
    xdg-user-dirs-gtk
    xdg-utils
    xdotool
    xorg-server
    xorg-xinit
    yarn
    yelp
    ytmdesktop-git
    zeal
    zip
    zoom
    zotero-bin
    zsh
    zsh-autosuggestions
    zsh-completions
    zsh-syntax-highlighting
    zsh-theme-powerlevel10k-git
    zsh-you-should-use
  )
  #endPackages

  # Conditional NVIDIA packages
if lspci | grep -i 'GeForce' >/dev/null; then
    depends+=(mangohud nvidia nvidia-settings opencl-nvidia zerotier-one)
fi

# Functions (user-provided â€” unchanged)
paru() {
    if ! pacman -Qq | grep -i paru &>/dev/null; then
        git clone https://aur.archlinux.org/paru.git
        pushd paru
        makepkg -sif
        popd
        rm -rf paru
    fi
}

zsh() {
    if [ "$(basename "$SHELL")" != "zsh" ]; then
        chsh -s /usr/bin/zsh
    fi
}

# Run user scripts
paru
zsh

package() {
  tar -xf rootfs.tar -C "$pkgdir"
}

