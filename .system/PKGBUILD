tar -h --exclude=.idea -cf rootfs.tar -C rootfs .

pkgname=linux-config
pkgver=0.1.0
pkgrel=20
pkgdesc='linux config'
url="https://github.com/uarslandev/.dotfiles-arch"
license=('GPL3')
arch=('x86_64')
source=('rootfs.tar')
noextract=('rootfs.tar')
sha512sums=('SKIP')

#startPackages
depends=(
    7zip
    accessibility-inspector
    adobe-source-han-sans-jp-fonts
    akonadi-calendar-tools
    akonadiconsole
    alligator
    amd-ucode
    angelfish
    angular-cli
    ani-cli
    anki-bin
    arianna
    ark
    artikulate
    audex
    audiotube
    aurorae
    base
    base-devel
    bash-language-server
    blender
    blinken
    bluedevil
    bluez
    bluez-utils
    bomber
    bottles
    bovo
    breeze
    breeze-gtk
    breeze-plymouth
    btop
    calligra
    cantor
    carla
    ceserver
    cheat-engine-zh
    colord-kde
    csharp-ls
    cups
    cups-pdf
    curl
    direnv
    discover
    dkms
    docker
    docker-compose
    dockerfile-language-server
    dolphin
    dolphin-plugins
    dotnet-sdk
    dragon
    drkonqi
    efibootmgr
    element-desktop
    elisa
    falkon
    fcitx5
    fcitx5-configtool
    fcitx5-gtk
    fcitx5-mozc
    fd
    firefox
    flatpak-kcm
    francis
    fzf
    fzf-tab-git
    gamescope
    gdb
    gemini-cli
    ghidra
    ghostwriter
    git
    git-delta
    git-filter-repo
    github-cli
    git-secret
    gnome-tweaks
    granatier
    grantlee-editor
    graphql-lsp
    gst-plugin-pipewire
    guitarix
    gwenview
    gxplugins-lv2-git
    heroic-games-launcher-bin
    htop
    ida-free
    imhex-bin
    intel-compute-runtime
    intel-media-driver
    intel-ucode
    isoimagewriter
    itinerary
    iwd
    jdownloader2
    jetbrains-toolbox
    juk
    k3b
    k9s
    kaccounts-providers
    kactivitymanagerd
    kajongg
    kalarm
    kalgebra
    kalk
    kalm
    kalzium
    kamoso
    kanagawa-gtk-theme-git
    kanagawa-icon-theme-git
    kanagram
    kapman
    kapptemplate
    kasts
    katomic
    kbackup
    kblackbox
    kblocks
    kbounce
    kbreakout
    kbruch
    kcachegrind
    kcalc
    kcharselect
    kclock
    kcolorchooser
    kcron
    kdebugsettings
    kde-cli-tools
    kdeconnect
    kdecoration
    kde-dev-scripts
    kde-dev-utils
    kde-gtk-config
    kde-inotify-survey
    kdenetwork-filesharing
    kdenlive
    kdeplasma-addons
    kdesdk-kio
    kdesdk-thumbnailers
    kdevelop-php
    kdevelop-python
    kdiamond
    keepassxc
    keysmith
    kfind
    kfourinline
    kgamma
    kgeography
    kget
    kglobalacceld
    kgoldrunner
    kgpg
    khangman
    khelpcenter
    kig
    kigo
    killbots
    kimagemapeditor
    kinfocenter
    kio-gdrive
    kio-zeroconf
    kirigami-gallery
    kiriki
    kiten
    kjournald
    kjumpingcube
    klettres
    klickety
    klines
    kmag
    kmahjongg
    kmenuedit
    kmines
    kmix
    kmousetool
    kmouth
    kmplot
    knavalbattle
    knetwalk
    knights
    knighttime
    koko
    kolf
    kollision
    kolourpaint
    kongress
    konqueror
    konquest
    kontact
    kontrast
    konversation
    kpat
    kpipewire
    krdc
    krdp
    krecorder
    kreversi
    krfb
    kruler
    kscreen
    kscreenlocker
    kshisen
    ksirk
    ksnakeduel
    kspaceduel
    ksquares
    ksshaskpass
    ksudoku
    ksystemlog
    ksystemstats
    kteatime
    ktimer
    ktorrent
    ktouch
    ktrip
    ktuberling
    kturtle
    kubrick
    kwallet-pam
    kwave
    kwayland
    kweather
    kwin
    kwin-x11
    kwordquiz
    kwrited
    layer-shell-qt
    lib32-nvidia-580xx-utils
    lib32-sdl2_image
    libkscreen
    libksysguard
    libplasma
    libpulse
    libva-intel-driver
    libva-nvidia-driver
    linux
    linux-firmware
    linux-headers
    linux-lts-headers
    lokalize
    lsfg-vk
    lskat
    lua-language-server
    lutris
    man-db
    mangohud
    man-pages
    marble
    markdownpart
    massif-visualizer
    maven
    merkuro
    mesa-utils
    milou
    minuet
    mongodb-bin
    mongosh-bin
    nano
    neochat
    neovim
    net-tools
    networkmanager
    network-manager-applet
    networkmanager-openvpn
    nmap
    nodejs-lts-jod
    notion-app-electron
    notion-calendar-electron
    npm
    ntfs-3g
    nvidia-580xx-dkms
    nvidia-580xx-utils
    nvim-lazy
    obsidian
    obs-studio
    ocean-sound-theme
    oh-my-zsh-git
    okular
    openssh
    otf-aurulent-nerd
    oxygen
    oxygen-sounds
    palapeli
    parley
    partitionmanager
    paru
    paru-debug
    pavucontrol
    pcsx2-latest-bin
    picmi
    pipewire
    pipewire-alsa
    pipewire-docs
    pipewire-jack
    pipewire-pulse
    plasma5support
    plasma-activities
    plasma-activities-stats
    plasma-browser-integration
    plasma-desktop
    plasma-disks
    plasma-firewall
    plasma-integration
    plasma-nm
    plasma-pa
    plasma-sdk
    plasma-systemmonitor
    plasma-thunderbolt
    plasmatube
    plasma-vault
    plasma-welcome
    plasma-workspace
    plasma-workspace-wallpapers
    plymouth-kcm
    polkit-kde-agent
    powerdevil
    poxml
    print-manager
    proton-ge-custom-bin
    pyright
    python
    python-i3ipc
    python-virtualenv
    qbittorrent
    qjackctl
    qqc2-breeze-style
    qrca
    ranger
    rar
    rclone
    reclass.net-bin
    reflector
    ripgrep
    rocs
    rust
    samba
    sddm-kcm
    skanlite
    skanpage
    skladnik
    smartmontools
    sof-firmware
    spectacle
    sql-language-server
    sshfs
    steam
    step
    svgpart
    sweeper
    systemd
    systemsettings
    teamspeak
    telly-skout
    thunderbird
    tmux
    tokodon
    torbrowser-launcher
    tree
    ttf-nerd-fonts-symbols
    typescript-language-server
    ufw
    umbrello
    unityhub
    unzip
    ventoy-bin
    vesktop-bin
    vi
    vim
    vimix-kanagawa-cursors
    visual-studio-code-bin
    vscode-html-languageserver
    vscode-json-languageserver
    vue-language-server
    vulkan-intel
    vulkan-radeon
    vulkan-tools
    wacomtablet
    wget
    which
    winetricks
    wireless_tools
    wireplumber
    wl-clipboard
    xdg-desktop-portal-gtk
    xdg-desktop-portal-kde
    xdg-utils
    xdotool
    xorg-server
    xorg-xinit
    yakuake
    yarn
    zeal
    zip
    zoom
    zotero-bin
    zram-generator
    zsh
    zsh-autosuggestions
    zsh-completions
    zsh-syntax-highlighting
    zsh-theme-powerlevel10k-git
    zsh-you-should-use
  )
  #endPackages

  # Conditional NVIDIA packages
  if lspci | grep -i 'GeForce' >/dev/null; then
	  depends+=(mangohud nvidia-580xx-dkms nvidia-utils opencl-nvidia zerotier-one)
  fi

# Functions (user-provided â€” unchanged)
paru() {
	if ! pacman -Qq | grep -i paru &>/dev/null; then
		git clone https://aur.archlinux.org/paru.git
		pushd paru
		makepkg -sif
		popd
		rm -rf paru
	fi
}

zsh() {
	if [ "$(basename "$SHELL")" != "zsh" ]; then
		chsh -s /usr/bin/zsh
	fi
}

# Run user scripts
paru
zsh

package() {
	tar -xf rootfs.tar -C "$pkgdir"
}

