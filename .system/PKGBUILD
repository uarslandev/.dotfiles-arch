tar -h --exclude=.idea -cf rootfs.tar -C rootfs .

pkgname=linux-config
pkgver=0.1.0
pkgrel=19
pkgdesc='linux config'
url="https://github.com/uarslandev/.dotfiles-arch"
license=('GPL3')
arch=('x86_64')
source=('rootfs.tar')
noextract=('rootfs.tar')
sha512sums=('SKIP')

#startPackages
depends=(
    7zip
    adobe-source-han-sans-jp-fonts
    amd-ucode
    angular-cli
    ani-cli
    anki-bin
    ark
    aurorae
    base
    base-devel
    bash-language-server
    blender
    bluedevil
    bluez
    bluez-utils
    bottles
    breeze
    breeze-gtk
    breeze-plymouth
    btop
    carla
    ceserver
    cheat-engine-zh
    csharp-ls
    cups
    cups-pdf
    curl
    direnv
    discover
    dkms
    docker
    docker-compose
    dockerfile-language-server
    dolphin
    dotnet-sdk
    drkonqi
    efibootmgr
    element-desktop
    fd
    firefox
    flatpak-kcm
    fzf
    fzf-tab-git
    gamescope
    gdb
    ghidra
    git
    git-delta
    git-filter-repo
    github-cli
    git-secret
    gnome-tweaks
    graphql-lsp
    gst-plugin-pipewire
    guitarix
    gxplugins-lv2-git
    heroic-games-launcher-bin
    htop
    ida-free
    imhex-bin
    intel-compute-runtime
    intel-media-driver
    intel-ucode
    iwd
    jdownloader2
    jetbrains-toolbox
    k9s
    kaccounts-providers
    kactivitymanagerd
    kanagawa-gtk-theme-git
    kanagawa-icon-theme-git
    kde-cli-tools
    kdeconnect
    kdecoration
    kde-gtk-config
    kdenetwork-filesharing
    kdeplasma-addons
    keepassxc
    kgamma
    kglobalacceld
    kinfocenter
    kio-gdrive
    kmenuedit
    knighttime
    kpipewire
    krdp
    kscreen
    kscreenlocker
    ksshaskpass
    ksystemstats
    kwallet-pam
    kwayland
    kwin
    kwin-x11
    kwrited
    layer-shell-qt
    lib32-nvidia-580xx-utils
    lib32-sdl2_image
    libkscreen
    libksysguard
    libplasma
    libpulse
    libva-intel-driver
    libva-nvidia-driver
    linux
    linux-firmware
    linux-headers
    linux-lts-headers
    lsfg-vk
    lua-language-server
    lutris
    man-db
    mangohud
    man-pages
    maven
    mesa-utils
    milou
    mongodb-bin
    mongosh-bin
    nano
    neovim
    net-tools
    networkmanager
    network-manager-applet
    networkmanager-openvpn
    nmap
    nodejs-lts-jod
    notion-app-electron
    notion-calendar-electron
    npm
    ntfs-3g
    nvidia-580xx-dkms
    nvidia-580xx-utils
    nvim-lazy
    obsidian
    obs-studio
    ocean-sound-theme
    oh-my-zsh-git
    openssh
    otf-aurulent-nerd
    oxygen
    oxygen-sounds
    paru
    paru-debug
    pavucontrol
    pcsx2-latest-bin
    pipewire
    pipewire-alsa
    pipewire-docs
    pipewire-jack
    pipewire-pulse
    plasma5support
    plasma-activities
    plasma-activities-stats
    plasma-browser-integration
    plasma-desktop
    plasma-disks
    plasma-firewall
    plasma-integration
    plasma-nm
    plasma-pa
    plasma-sdk
    plasma-systemmonitor
    plasma-thunderbolt
    plasma-vault
    plasma-welcome
    plasma-workspace
    plasma-workspace-wallpapers
    plymouth-kcm
    polkit-kde-agent
    powerdevil
    print-manager
    proton-ge-custom-bin
    pyright
    python
    python-i3ipc
    python-virtualenv
    qbittorrent
    qjackctl
    qqc2-breeze-style
    ranger
    rar
    rclone
    reclass.net-bin
    reflector
    ripgrep
    rust
    samba
    sddm-kcm
    smartmontools
    sof-firmware
    spectacle
    sql-language-server
    sshfs
    steam
    systemd
    systemsettings
    teamspeak
    thunderbird
    tmux
    torbrowser-launcher
    tree
    ttf-nerd-fonts-symbols
    typescript-language-server
    ufw
    unityhub
    unzip
    ventoy-bin
    vesktop-bin
    vi
    vim
    vimix-kanagawa-cursors
    visual-studio-code-bin
    vscode-html-languageserver
    vscode-json-languageserver
    vue-language-server
    vulkan-intel
    vulkan-radeon
    vulkan-tools
    wacomtablet
    wget
    which
    winetricks
    wireless_tools
    wireplumber
    wl-clipboard
    xdg-desktop-portal-gtk
    xdg-desktop-portal-kde
    xdg-utils
    xdotool
    xorg-server
    xorg-xinit
    yarn
    zeal
    zip
    zoom
    zotero-bin
    zram-generator
    zsh
    zsh-autosuggestions
    zsh-completions
    zsh-syntax-highlighting
    zsh-theme-powerlevel10k-git
    zsh-you-should-use
  )
  #endPackages

  # Conditional NVIDIA packages
if lspci | grep -i 'GeForce' >/dev/null; then
    depends+=(mangohud nvidia-580xx-dkms nvidia-utils opencl-nvidia zerotier-one)
fi

# Functions (user-provided â€” unchanged)
paru() {
    if ! pacman -Qq | grep -i paru &>/dev/null; then
        git clone https://aur.archlinux.org/paru.git
        pushd paru
        makepkg -sif
        popd
        rm -rf paru
    fi
}

zsh() {
    if [ "$(basename "$SHELL")" != "zsh" ]; then
        chsh -s /usr/bin/zsh
    fi
}

# Run user scripts
paru
zsh

package() {
  tar -xf rootfs.tar -C "$pkgdir"
}

